Foundation.Interchange.SPECIAL_QUERIES["medium down"]="screen and (max-width: 63.9375em)",$(document).foundation(),$(document).on("replaced.zf.interchange",function(e){$(this).foundation()}),$("button[data-toggle]").on("click",function(){$(this).parent().hasClass("js-button-toggled")?$(this).parent().removeClass("js-button-toggled"):$(this).parent().addClass("js-button-toggled")}),window.onload=function(){};var choice_n_random=function(e,t){t=void 0!==t?t:3;for(var a=[];;){var n=e[Math.floor(Math.random()*e.length)];if(n.description&&(a.push(n),a.length==t))break}return a},choice_person=function(e,a,n){n=void 0!==n?n:null;var o=null;return $.each(e,function(e,t){t.uid==a&&((o=t).role=n)}),o?[o]:(console.log("A proper profile for "+a+" does not exist."),[{name:a,role:n}])},choice_person_by_name=function(e,a){var n=[];return $.each(e,function(e,t){a.includes(t.name)&&n.push(t)}),n},choice_garant=function(e){return choice_person(e,page_garant,"garant")},choice_leader=function(e){return choice_person(e,page_leader,"předseda")},choice_contact=function(e){return choice_person(e,page_contact,"kontaktní osoba")},author_link=function(e,a){var t=a.text().split(",").map(function(e){return e.trim()}),n=choice_person_by_name(e,t);n.length!=t.length&&console.log("Někteří autoři nemají profil."),a.text(""),$.each(n,function(e,t){e=e==n.length-1;$("<a>",{text:t.name,title:t.name,href:"https://www.pirati.cz"+t.url}).appendTo(a),e||a.append(", ")})},show_people=function(e,t,l){var a;l.length&&(a=t(e),$.get(snippet_profile,function(e){var r=Handlebars.compile(e);$.each(a,function(e,t){var a,n=["role","name","mob","mail","img"];for(a in n){var o=n[a];null!=l.attr("data-"+o)&&(t[o]=l.attr("data-"+o))}var i=r(t);l.append(i)})},"html"))},search=function(e){$("#searchsub").click(function(){var e=$("#search").val();window.location.href="https://duckduckgo.com/?q=site:pirati.cz+"+e}),$("#search").autocomplete({source:e,select:function(e,t){window.location.href=t.item.value}})},back_top=function(){$(window).scroll(function(){50<$(this).scrollTop()?$(".scrolltop:hidden").stop(!0,!0).fadeIn():$(".scrolltop").stop(!0,!0).fadeOut()}),$(function(){$(".scroll").click(function(){return $("html,body").animate({scrollTop:$(".thetop").offset().top},"1000"),!1})})},show_relatives=function(e){var a,n,o=$("#relatives");o.length&&(a=e[0],n=5,page_tags.length||$("#relatives-box").hide(),$.each(page_tags,function(e,t){$.each(a[t],function(e,t){var a;t.url!=page_url&&0<n--&&(a=$("<li/>").appendTo(o),$("<a/>").text(t.title).attr("href",t.url).appendTo(a))})}))},hideEvents=function(){new Date(this.attributes[0].value)<today||showed>limit?($this=$(this)).hide():showed+=1},hideOldEvents=function(){new Date;$("#boattrip").children().each(hideEvents),$("#roadtrip").children().each(hideEvents)},makemap=function(e,o){var i=e[0].settings,r=($(i.id).width(i.size.width),$(i.id).height(i.size.height),Raphael(i.id,i.size.width,i.size.height)),l=($("#region-description>div").hide(),0),c=$("#regions-list"),s=$("#regions-list-2"),e=e[0].regions;$.each(e,function(e,a){l<7?(t=$("<li/>").appendTo(c),$("<a/>").text(a.name).attr("href",a[o]).appendTo(t)):(t=$("<li/>").appendTo(s),$("<a/>").text(a.name).attr("href",a[o]).appendTo(t)),l++;var t={title:a.name},n=$.extend(i.region_attrs,t);i.colors?a.color=Raphael.getColor():a.color="#666",a.id;$.each(a.paths,function(e,t){(t=r.path(t).scale(i.size.scale,i.size.scale,0,0).attr(n))[0].onclick=function(){$(location).attr("href",a[o])},t[0].ondblclick=function(){window.open(a[o])},t[0].onmouseover=function(){t.animate({fill:a.color},500).attr({cursor:"pointer"})},t[0].onmouseout=function(){t.animate({fill:"#333"},500)}})})};$(function(){var t;$.get(api_search).done(search).fail(function(e){console.log("Error in search:",e)}),back_top(),hideOldEvents(),$.get(api_people).done(function(e){show_people(e,choice_n_random,$("#people")),show_people(e,choice_garant,$("#garant")),show_people(e,choice_leader,$("#leader")),page_leader!=page_contact&&show_people(e,choice_contact,$("#contact")),"post"==page_layout&&author_link(e,$("#authors"))}).fail(function(e){console.log("Error in relatives articles:",e)}),$("#relatives").length&&$.get(api_tags).done(function(e){show_relatives(e)}).fail(function(e){console.log("Error in relatives articles:",e)}),$("#regions-map").length&&(t="url","/volby/2017/"==page_url&&(t="kandidatka"),$.get(api_regions).done(function(e){makemap(e,t)}).fail(function(e){console.log("Error: map")}))});const PREFERRED_VIDEO_SOURCE="https://tv.pirati.cz/feeds/videos.xml?sort=-publishedAt",FALLBACK_VIDEO_SOURCE="https://www.youtube-nocookie.com/embed?listType=user_uploads&list=CeskaPiratskaStrana";var setLatestPeerTubeVideo=async function(){var a=document.getElementById("peertube-iframe");try{let e=await fetch("https://tv.pirati.cz/feeds/videos.json?sort=-publishedAt",{method:"GET"}),t=await e.json();a.src=t.items[0].url.replace("/w/","/videos/embed/")}catch(e){a.src="https://www.youtube-nocookie.com/embed?listType=user_uploads&list=CeskaPiratskaStrana",console.log("Chyba při načítání PeerTube videa: "+e)}};function formatNumber(e,t){var a="";if(null!=e){a=e.toString(),blockCount=Math.floor((a.length-1)/3);for(var n=0;n<blockCount;n++)a=a.slice(0,a.length-3*(n+1)-n)+" "+a.slice(a.length-3*(n+1)-n);0!=e&&null!=t?a=t+a+",-":a+=",-"}return a}function formatPercent(e){var t="";return null!=e&&((t=Math.abs(e).toString()).replace(".",","),t=(0<e?"-":"+")+t+" %"),t}function calculate(){var e=$("#dane-akt-hruba-in"),t=$("#dane-akt-deti"),a=$("#dane-akt-student"),n=$("#dane-akt-superhruba"),o=$("#dane-akt-socialni"),i=$("#dane-akt-zdravotni"),r=$("#dane-akt-hruba"),l=$("#dane-akt-socialni-obc"),c=$("#dane-akt-zdravotni-obc"),s=$("#dane-akt-dan"),u=$("#dane-akt-solidarni"),d=$("#dane-akt-slevy"),h=$("#dane-akt-bonus"),p=$("#dane-akt-cista"),f=$("#dane-akt-efektivni"),m=$("#dane-pir-hruba"),v=$("#dane-pir-dan"),g=$("#dane-pir-slevy"),b=$("#dane-pir-bonus"),k=$("#dane-pir-cista"),_=$("#dane-pir-efektivni"),x=$("#dane-rozdil"),e=e.val(),t=(null==(w=t.val())&&(w=0),a.is(":checked"));if(null!=e&&11e3<=e){for(var e=Math.ceil(e),w=Math.ceil(w),a=Math.ceil(.25*e),C=(28232<a&&(a=28232),Math.ceil(.09*e)),y=e+a+C,E=0,N=e,N=(112928<e&&(N=112928,E=Math.ceil(.07*(e-112928))),Math.ceil(.065*N)),T=Math.ceil(.045*e),z=100*Math.ceil(y/100),z=Math.ceil(.15*z),M=2070,t=(t&&(M+=335),z-M),P=(t<0&&(t=0),0),S=0;S<w;S++)P+=0==S?1117:1==S?1617:2017;var t=e-N-T-(t-=P)-E,j=Math.ceil(1e4*(1-t/y))/100,q=Math.ceil(.47*y),I=q-M,I=(I<0&&(I=0),y-(I-=P)),O=Math.ceil(1e4*(1-I/y))/100,R=I-t;n.text(formatNumber(y)),o.text(formatNumber(a,"+")),i.text(formatNumber(C,"+")),r.text(formatNumber(e,"")),l.text(formatNumber(N,"-")),c.text(formatNumber(T,"-")),s.text(formatNumber(z,"-")),u.text(formatNumber(E,"-")),d.text(formatNumber(M,"+")),h.text(formatNumber(P,"+")),p.text(formatNumber(t)),f.text(formatPercent(j)),m.text(formatNumber(y)),v.text(formatNumber(q,"-")),g.text(formatNumber(M,"+")),b.text(formatNumber(P,"+")),k.text(formatNumber(I)),_.text(formatPercent(O)),x.text(formatNumber(R,0<R?"+":"")),0<=R?(x.hasClass("dane-result-minus")&&x.removeClass("dane-result-minus"),x.hasClass("dane-result-plus")||x.addClass("dane-result-plus")):(x.hasClass("dane-result-minus")||x.addClass("dane-result-minus"),x.hasClass("dane-result-plus")&&x.removeClass("dane-result-plus"))}else n.text(""),o.text(""),i.text(""),r.text(""),l.text(""),c.text(""),s.text(""),u.text(""),d.text(""),h.text(""),p.text(""),f.text(""),m.text(""),v.text(""),g.text(""),b.text(""),k.text(""),_.text(""),x.text("")}function calculateClick(){var e=$("#dane-akt-hruba-in").val();null!=e&&11e3<=e?($("#div-calculator").removeClass("hidden-start"),$("#div-calculator-info").removeClass("hidden-start"),$("#div-calculator-text").removeClass("hidden-start"),$("#div-chcete-vedet-vic").removeClass("hidden-start"),calculate(),$("html, body").animate({scrollTop:$("#div-calculator").offset().top},500)):$("#dane-error-in").removeClass("hidden")}$().ready(function(){$("#dane-button-calculate").on("click",calculateClick),$("#dane-akt-hruba-in").on("keyup",calculate).on("change",calculate),$("#dane-akt-deti").on("keyup",calculate).on("change",calculate),$("#dane-akt-student").on("change",calculate),$("#dane-akt-hruba-in").on("focus",function(){$(this).hasClass("hidden")||$("#dane-error-in").addClass("hidden")})});var _paq=_paq||[];_paq.push(["setDomains",["*.www.pirati.cz"]]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//piwik.pirati.cz/",t=(_paq.push(["setTrackerUrl",e+"piwik.php"]),_paq.push(["setSiteId","1"]),document),a=t.createElement("script"),t=t.getElementsByTagName("script")[0];a.type="text/javascript",a.async=!0,a.defer=!0,a.src=e+"piwik.js",t.parentNode.insertBefore(a,t)}();